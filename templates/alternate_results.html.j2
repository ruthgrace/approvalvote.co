<div class="container mx-auto px-4">
  <div style="display: flex; justify-content: space-around; gap: 20px;">
    <div style="flex: 1;">
      <h2 class="text-2xl font-bold mb-4">Votes for preferred result: {{ desired_candidates }}</h2>
      <div id="chart1" class="h-64"></div>
    </div>

    <!-- Second Chart Container -->
    <div style="flex: 1;">
      {% if tie == True %}
        <h2 class="text-2xl font-bold mb-4">Votes for some of the tied winners: {{actual_candidates}}</h2>
      {% else %}
        <h2 class="text-2xl font-bold mb-4">Votes for the actual winning result: {{actual_candidates}}</h2>
      {% endif %}
      <div id="chart2" class="h-64"></div>
    </div>

  </div>
</div>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
  function createBarChart(containerId, data, labels) {
    // Set dimensions
    const margin = {top: 20, right: 20, bottom: 30, left: 40};
    const width = 600 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    // Create SVG
    const svg = d3.select(containerId)
      .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

    // Create scales
    const x = d3.scaleBand()
      .range([0, width])
      .padding(0.1)
      .domain(labels);

    const y = d3.scaleLinear()
      .range([height, 0])
      .domain([0, {{max_votes}}]);

    // Add X axis
    svg.append("g")
      .attr("transform", `translate(0,${height})`)
      .call(d3.axisBottom(x));

    // Add Y axis
    svg.append("g")
      .call(d3.axisLeft(y));

    // Create bars
    svg.selectAll(".bar")
      .data(data)
      .enter()
      .append("rect")
        .attr("class", "bar")
        .attr("x", (d, i) => x(labels[i]))
        .attr("y", d => y(d))
        .attr("width", x.bandwidth())
        .attr("height", d => height - y(d))
        .attr("fill", "#4F46E5");
  }

  // Create first chart
  createBarChart("#chart1", {{desired_vote_tally}}, {{desired_chart_labels}});

  // Create second chart
  createBarChart("#chart2", {{actual_vote_tally}}, {{actual_chart_labels}});
</script>